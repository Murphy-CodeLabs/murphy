---
title: Transaction Error Fallback
description: Comprehensive error handling UI with retry and debugging features
icon: Ban
---

import TxnErrorFallbackPreiew from "@/components/txn-error-fallback-preview";

<PreviewComponent
  name={"Transaction Error Fallback"}
  v0JsonFileName={"txn-error-fallback"}
>
  <div className="w-full max-w-md mx-auto">
    <TxnErrorFallbackPreiew />
  </div>
</PreviewComponent>

## Installation

<Steps>

<Step>
  Install Transaction Error Fallback
  <InstallationCommands
    packageUrl={`${process.env.NEXT_PUBLIC_BASE_URL}/r/txn-error-fallback.json`}
  />
</Step>

</Steps>

## Basic Usage

```tsx
"use client";

import { useState } from "react";
import { Button } from "@/components/ui/button";
import { TxnnErrorFallback } from "@/components/ui/murphy/txn-error-fallback";

export default function MyPage() {
  const [showError, setShowError] = useState(false);

  const handleRetry = () => {
    console.log("Retrying transaction...");
    setShowError(false);
    // Your retry logic here
  };

  return (
    <div className="container mx-auto p-6">
      <h1 className="text-2xl font-bold mb-6">Error Handling Demo</h1>

      <Button onClick={() => setShowError(true)} variant="destructive">
        Show Error
      </Button>

      {showError && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <TxnErrorFallback
            error="Transaction failed: Insufficient funds for transaction fees"
            signature="5VfYmGC9L8ty3D4HutfxndoKXGBwXJWKKvxgF7qQzqK8xMjU9v7Rw2sP3nT6hL4jK9mN8bC1dF2eG3hI5jK6lM7n"
            onRetry={handleRetry}
            onClose={() => setShowError(false)}
          />
        </div>
      )}
    </div>
  );
}
```

## Props

<TypeTable
  type={{
    error: {
      description: "Error message to display to the user",
      type: "string",
      default: "required",
    },
    signature: {
      description: "Transaction signature for debugging",
      type: "string",
      default: "undefined",
    },
    onRetry: {
      description: "Callback function when retry button is clicked",
      type: "() => void",
      default: "undefined",
    },
    onClose: {
      description: "Callback function when close button is clicked",
      type: "() => void",
      default: "undefined",
    },
    showLogs: {
      description: "Whether to show expandable transaction logs",
      type: "boolean",
      default: "false",
    },
    logs: {
      description: "Array of log messages to display",
      type: "string[]",
      default: "[]",
    },
  }}
/>

## Examples

### Simple Error

```tsx
<TxnErrorFallback
  error="Transaction failed: Network connection timeout"
  onRetry={() => retryTransaction()}
  onClose={() => closeError()}
/>
```

### Error with Transaction Signature

```tsx
<TxnErrorFallback
  error="Transaction failed: Program error occurred during execution"
  signature="5VfYmGC9L8ty3D4HutfxndoKXGBwXJWKKvxgF7qQzqK8xMjU9v7Rw2sP3nT6hL4jK9mN8bC1dF2eG3hI5jK6lM7n"
  onRetry={() => retryTransaction()}
  onClose={() => closeError()}
/>
```

### Error with Transaction Logs

```tsx
<TxnErrorFallback
  error="Transaction failed: Custom program error: 0x1771"
  signature="2B5VfYmGC9L8ty3D4HutfxndoKXGBwXJWKKvxgF7qQzqK8xMjU9v7Rw2sP3nT6hL4jK9mN8bC1dF2eG3hI5jK6lM"
  onRetry={() => retryTransaction()}
  onClose={() => closeError()}
  showLogs={true}
  logs={[
    "Program 11111111111111111111111111111111 invoke [1]",
    "Program log: Instruction: Transfer",
    "Program log: Error: custom program error: 0x1771",
    "Program 11111111111111111111111111111111 consumed 200000 of 200000 compute units",
    "Program 11111111111111111111111111111111 failed: custom program error: 0x1771",
  ]}
/>
```

## Customization

### Custom Error Messages

```tsx
const getErrorMessage = (error: string) => {
  const errorMap = {
    "insufficient funds": "You need more SOL to complete this transaction",
    "network error": "Connection problem - please try again",
    timeout: "Transaction is taking longer than expected",
    "program error": "Smart contract issue - please contact support",
  };

  for (const [key, message] of Object.entries(errorMap)) {
    if (error.toLowerCase().includes(key)) {
      return message;
    }
  }

  return error;
};
```

### Custom Styling

```tsx
<TxnErrorFallback
  error={error}
  className="border-2 border-red-300 shadow-lg"
  onRetry={handleRetry}
  onClose={handleClose}
/>
```
