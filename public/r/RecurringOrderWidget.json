{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "RecurringOrderWidget",
  "type": "registry:block",
  "author": "Murphy",
  "description": "Murphy component to manage and filter Jupiter Recurring DCA Orders on Solana mainnet",
  "dependencies": [
    "@solana/web3.js",
    "@solana/wallet-adapter-react",
    "sonner"
  ],
  "files": [
    {
      "path": "components/ui/murphy/Jupiter-Recurring/RecurringOrderWidget.tsx",
      "content": "\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport useRecurringJupiter, { RecurringType, OrderStatus } from \"./useRecurringJupiter\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { RecurringOrderCard } from \"./RecurringOrderCard\";\nimport { cn } from \"@/lib/utils\";\nimport { RefreshCw, FolderOpen } from \"lucide-react\";\n\nconst RECURRING_TYPE_OPTIONS: { label: string; value: RecurringType }[] = [\n  { label: \"Time-based\", value: \"time\" },\n  { label: \"Price-based\", value: \"price\" },\n  { label: \"All\", value: \"all\" },\n];\nconst ORDER_STATUS_OPTIONS: { label: string; value: OrderStatus }[] = [\n  { label: \"Active\", value: \"active\" },\n  { label: \"History\", value: \"history\" },\n];\n\nconst LOCAL_STATUS_OPTIONS = [\n  { label: \"All\", value: \"all\" },\n  { label: \"Completed\", value: \"completed\" },\n  { label: \"Cancelled\", value: \"cancelled\" },\n  { label: \"Expired\", value: \"expired\" },\n  { label: \"Failed\", value: \"failed\" },\n];\n\nexport function RecurringOrderWidget({ className, style }: { className?: string; style?: React.CSSProperties }) {\n  const { publicKey, connected } = useWallet();\n  const {\n    loading,\n    error,\n    data,\n    recurringType,\n    orderStatus,\n    includeFailedTx,\n    setRecurringType,\n    setOrderStatus,\n    setIncludeFailedTx,\n    refetch,\n  } = useRecurringJupiter();\n\n  const [localStatus, setLocalStatus] = useState<string>(\"all\");\n\n  useEffect(() => {\n    if (connected && publicKey) {\n      refetch();\n    }\n    // eslint-disable-next-line\n  }, [connected, publicKey]);\n\n  if (!connected || !publicKey) {\n    return (\n      <Card className={cn(\"max-w-md mx-auto\", className)}>\n        <CardHeader>\n          <CardTitle>Recurring Orders</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground\">Please connect your wallet to view your recurring orders.</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={cn(\"w-full bg-neutral-950 border border-neutral-800 shadow-2xl rounded-2xl p-0 flex flex-col\", className)} style={style}>\n      <CardHeader className=\"flex flex-col gap-1 px-8 pt-8 pb-2\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-2\">\n          <CardTitle className=\"text-2xl font-extrabold text-white tracking-tight\">Your Recurring Orders</CardTitle>\n          <span className=\"text-sm text-neutral-400 font-normal\">All your DCA orders in one place</span>\n        </div>\n      </CardHeader>\n      <CardContent className=\"flex flex-col gap-6 px-8 pb-8\">\n        {/* Filter Bar */}\n        <div className=\"flex flex-col md:flex-row md:items-center gap-4 w-full mb-2\">\n          <div className=\"flex flex-1 flex-col md:flex-row gap-4\">\n            <Select value={recurringType} onValueChange={(v) => setRecurringType(v as RecurringType, orderStatus, includeFailedTx)}>\n              <SelectTrigger className=\"min-w-[140px] bg-neutral-900 border border-neutral-800 text-white focus:ring-2 focus:ring-violet-600 rounded-lg px-4 py-2\">\n                <SelectValue placeholder=\"Type\" />\n              </SelectTrigger>\n              <SelectContent>\n                {RECURRING_TYPE_OPTIONS.map((opt) => (\n                  <SelectItem key={opt.value} value={opt.value}>{opt.label}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Select value={orderStatus} onValueChange={(v) => { setOrderStatus(v as OrderStatus); setLocalStatus(\"all\"); }}>\n              <SelectTrigger className=\"min-w-[120px] bg-neutral-900 border border-neutral-800 text-white focus:ring-2 focus:ring-violet-600 rounded-lg px-4 py-2\">\n                <SelectValue placeholder=\"Status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {ORDER_STATUS_OPTIONS.map((opt) => (\n                  <SelectItem key={opt.value} value={opt.value}>{opt.label}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {orderStatus === \"history\" && (\n              <Select value={localStatus} onValueChange={setLocalStatus}>\n                <SelectTrigger className=\"min-w-[120px] bg-neutral-900 border border-neutral-800 text-white focus:ring-2 focus:ring-violet-600 rounded-lg px-4 py-2\">\n                  <SelectValue placeholder=\"Filter by status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {LOCAL_STATUS_OPTIONS.map((opt) => (\n                    <SelectItem key={opt.value} value={opt.value}>{opt.label}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n          <div className=\"flex items-center gap-4 ml-auto\">\n            <div className=\"flex items-center gap-2\">\n              <Switch checked={includeFailedTx} onCheckedChange={setIncludeFailedTx} id=\"failedtx\" />\n              <label htmlFor=\"failedtx\" className=\"text-xs text-neutral-300 whitespace-nowrap\">Include Failed Tx</label>\n            </div>\n            <Button size=\"sm\" variant=\"outline\" onClick={() => refetch()} disabled={loading} className=\"min-w-[100px] bg-neutral-900 border border-violet-700 text-violet-400 hover:bg-violet-950 hover:text-white font-semibold rounded-lg transition\">\n              {loading ? <RefreshCw className=\"animate-spin w-4 h-4\" /> : \"Refresh\"}\n            </Button>\n          </div>\n        </div>\n        {/* Content */}\n        <div className=\"flex-1 flex flex-col items-center justify-center min-h-[180px]\">\n          {error && typeof error === \"string\" && (\n            error.trim().startsWith(\"{\") && error.trim().endsWith(\"}\")\n              ? <div className=\"text-red-600 text-base mb-2\">No orders found or API returned empty result.</div>\n              : <div className=\"text-red-600 text-base mb-2\">{error}</div>\n          )}\n          {loading && <div className=\"text-neutral-400 text-base\">Loading orders...</div>}\n          {!loading && (!data || data.length === 0) && (\n            <div className=\"flex flex-col items-center gap-2 mt-6\">\n              <FolderOpen className=\"w-12 h-12 text-neutral-700 mb-2\" />\n              <div className=\"text-lg text-neutral-400 font-medium\">No recurring orders found.</div>\n            </div>\n          )}\n          <div className=\"flex flex-col w-full gap-2 mt-2\">\n            {data && data\n              .filter((order: any) => {\n                if (orderStatus !== \"history\") return true;\n                if (localStatus === \"all\") return true;\n                return order.status.toLowerCase() === localStatus.toLowerCase();\n              })\n              .map((order: any) => (\n                <div key={order.id} className=\"w-full border-b border-neutral-800 last:border-b-0 hover:bg-neutral-900/80 transition rounded-lg px-2 py-2\">\n                  <RecurringOrderCard order={order} className=\"bg-transparent border-none shadow-none p-0\" />\n                </div>\n              ))}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default RecurringOrderWidget; \n",
      "type": "registry:component",
      "target": "components/ui/murphy/Jupiter-Recurring/RecurringOrderWidget.tsx"
    }
  ]
}